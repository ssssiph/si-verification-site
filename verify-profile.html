<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>siph industry</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è</h1>
        <p>–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è Roblox, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å".</p>
        <div id="codeBox" class="code-box">–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è...</div>
        <button onclick="generateCode()">üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥</button>
        <button onclick="copyCode()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
        <button onclick="checkVerification()">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
        <div id="status" class="status-box">‚åõ –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...</div>
        <button onclick="goBack()">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
    </div>

    <script>
        const words = ["alpha", "bravo", "delta", "echo", "foxtrot", "gamma", "helium", "kilo", "lima", "november"];

        function generateCode() {
            let code = Array.from({ length: Math.floor(Math.random() * (7 - 5 + 1)) + 5 }, () => 
                words[Math.floor(Math.random() * words.length)]
            ).join(" ");
            document.getElementById("codeBox").innerText = code;
            localStorage.setItem("verificationCode", code);
        }

        function copyCode() {
            navigator.clipboard.writeText(document.getElementById("codeBox").innerText);
            alert("–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
        }

        function checkVerification() {
            let username = new URLSearchParams(window.location.search).get("username");
            if (!username) {
                document.getElementById("status").innerText = "‚ö† –ù–∏–∫–Ω–µ–π–º –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.";
                return;
            }

            let storedCode = localStorage.getItem("verificationCode") || "–ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω!";
            document.getElementById("status").innerText = `üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å ${username} —Å –∫–æ–¥–æ–º: "${storedCode}"...`;

            fetch(`https://—Ç–≤–æ–π-—Å–∞–π—Ç/api/check-profile?username=${encodeURIComponent(username)}&code=${encodeURIComponent(storedCode)}`)
                .then(response => response.json())
                .then(data => {
                    if (data.verified) {
                        document.getElementById("status").innerText = "‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞! –†–æ–ª—å –≤—ã–¥–∞–Ω–∞.";
                        sendToDiscord(username);
                    } else {
                        document.getElementById("status").innerText = "‚ùå –ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω! –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.";
                    }
                })
                .catch(error => {
                    document.getElementById("status").innerText = "‚ö† –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.";
                    console.error(error);
                });
        }

        function sendToDiscord(username) {
            fetch("https://—Ç–≤–æ–π-—Å–∞–π—Ç/api/discord-verify", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ username: username, verified_status: true })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ Discord! –†–æ–ª—å –≤—ã–¥–∞–Ω–∞.");
                } else {
                    alert("‚ö† –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö –≤ Discord.");
                }
            })
            .catch(error => {
                alert("‚ùå –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å Discord API.");
                console.error(error);
            });
        }

        function goBack() {
            window.location.href = "index.html";
        }

        generateCode();
    </script>

</body>
</html>
